<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sapphire Beauty</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:Arial,sans-serif;background:#f9f9f9;}
header{background:#d63384;color:white;padding:20px;display:flex;align-items:center;justify-content:center;position:relative;}
#logo{width:50px;height:50px;margin-right:10px;}
header h1{margin:0;font-size:28px;}
nav{position:absolute;right:20px;top:50%;transform:translateY(-50%);}
nav a{color:white;text-decoration:none;margin:0 10px;font-weight:bold;cursor:pointer;}
nav a:hover{text-decoration:underline;}
#userInfo{margin-left:10px;font-weight:bold;}
#searchBoxShop{display:block;margin:15px auto;padding:8px;width:80%;max-width:400px;font-size:16px;}
.hero img{width:100%;border-radius:10px;margin-bottom:10px;}
.categories{display:flex;justify-content:center;gap:20px;flex-wrap:wrap;padding:20px;}
.category-card{width:150px;height:150px;border-radius:10px;display:flex;align-items:flex-end;justify-content:center;color:white;font-weight:bold;font-size:16px;text-shadow:1px 1px 5px black;cursor:pointer;background-size:cover;background-position:center;transition:transform 0.3s;}
.category-card:hover{transform:scale(1.05);}
.products{display:flex;flex-wrap:wrap;gap:20px;justify-content:center;padding:20px;}
.product{position:relative;background:white;padding:15px;width:220px;text-align:center;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,0.1);overflow:hidden;transition: transform 0.3s;}
.product:hover{transform: translateY(-5px);}
.product img{width:100%;border-radius:5px;transition:0.3s;}
.product h3, .product p{margin:10px 0 5px;}
.product-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);display:flex;flex-direction:column;justify-content:center;align-items:center;opacity:0;transition:opacity 0.3s;border-radius:8px;}
.product:hover .product-overlay{opacity:1;}
.product-overlay button{margin:5px;padding:10px 15px;font-size:14px;}
button{background:#d63384;color:white;border:none;padding:10px;margin:3px;cursor:pointer;border-radius:5px;font-size:15px;}
button:hover{background:#b82c6f;}
footer{text-align:center;padding:10px;background:#eee;margin-top:20px;}
@media(max-width:600px){
header{flex-direction:column;justify-content:center;}
nav{position:static;transform:none;margin-top:10px;}
.products{flex-direction:column;align-items:center;}
.product{width:90%;}
.category-card{width:120px;height:120px;}
.product-overlay{opacity:1;}
}
.hidden{display:none;}
#loginSection,#signupSection,#cartSection,#adminSection{padding:30px;text-align:center;}
input[type=text],input[type=password],input[type=number]{padding:8px;width:250px;font-size:16px;margin-bottom:10px;}
.cart-item{display:flex;justify-content:space-between;align-items:center;padding:5px 0;}
.cart-item span{margin-right:10px;}
.cart-total{font-weight:bold;margin-top:15px;}
/* Side panel */
#sidePanel{width:250px;background:#f4f4f4;height:100%;position:fixed;top:0;left:-250px;transition:0.3s;padding-top:60px;box-shadow:2px 0 5px rgba(0,0,0,0.2);overflow-y:auto;z-index:999;color:black;}
#sidePanel button{width:100%;text-align:left;padding:10px;border:none;background:none;font-size:16px;cursor:pointer;color:black;}
#sidePanel button:hover{background:#ddd;}
#sidePanel ul{list-style:none;padding-left:20px;display:none;color:black;}
#sidePanel ul li{color:black;padding:3px 0;cursor:pointer;}
#menuBtn{position:absolute;left:20px;top:25px;font-size:24px;color:white;background:none;border:none;cursor:pointer;z-index:1000;}
#menuBtn:hover{color:#bbb;}
.error-message{color:#d63384; font-size:14px; margin-top:5px;}
</style>
</head>
<body>
<header>
<button id="menuBtn" onclick="togglePanel()">☰</button>
<img id="logo" src="images/logo.png" alt="Logo">
<h1>Sapphire Beauty</h1>
<nav>
<a onclick="showSection('home')">Home</a>
<a onclick="showSection('shop')">Shop</a>
<a onclick="showSection('cart')">Cart (<span id="cart-count">0</span>)</a>
<a id="loginNav" onclick="showSection('login')">Login</a>
<a id="signupNav" onclick="showSection('signup')">Signup</a>
<a id="adminNav" class="hidden" onclick="showSection('admin')">Admin</a>
<span id="userInfo" class="hidden"></span>
<button id="logoutBtn" class="hidden" onclick="logout()">Logout</button>
</nav>
</header>
<!-- Side Panel -->
<div id="sidePanel">
<button onclick="showSection('home'); togglePanel()">Home</button>
<button onclick="toggleBrand('eveline')">Eveline</button>
<ul id="eveline"></ul>
<button onclick="toggleBrand('neva')">Neva</button>
<ul id="neva"></ul>
<button onclick="toggleBrand('gabrini')">Gabrini</button>
<ul id="gabrini"></ul>
<button onclick="toggleBrand('keune')">Keune</button>
<ul id="keune"></ul>
</div>
<!-- Homepage -->
<section id="home">
<div class="hero">
<img id="slideShow" src="images/Eveline.jpg" alt="Banner">
<h2 style="text-align:center; color:#d63384; margin-top:10px;">Your One-Stop Cosmetic Store</h2>
<p style="text-align:center;margin-bottom:20px;">Natural, high-quality products delivered to your door.</p>
</div>
<h2 style="text-align:center; color:#d63384; margin-top:20px;">Shop by Category</h2>
<div class="categories">
<div class="category-card" onclick="filterCategory('skincare')" style="background-image:url('images/Skincare.jpg');"><p>Skincare</p></div>
<div class="category-card" onclick="filterCategory('makeup')" style="background-image:url('images/Makeup.jpg');"><p>Makeup</p></div>
<div class="category-card" onclick="filterCategory('haircare')" style="background-image:url('images/Haircare.jpg');"><p>Hair Care</p></div>
<div class="category-card" onclick="filterCategory('fragrances')" style="background-image:url('images/Fragrances.jpg');"><p>Fragrances</p></div>
<div class="category-card" onclick="filterCategory('tools')" style="background-image:url('images/Tools.jpg');"><p>Tools & Accessories</p></div>
<div class="category-card" onclick="filterCategory('all')" style="background-color:#d63384;"><p>All Products</p></div>
</div>
</section>
<!-- Signup Section -->
<section id="signup" class="hidden">
<div class="hero">
<img src="images/Login.jpg" alt="Signup">
</div>
<div id="signupSection">
<h2>Create Account</h2>
<input type="text" id="signupUsername" placeholder="Username" autocomplete="off"><br>
<input type="password" id="signupPassword" placeholder="Password" autocomplete="new-password"><br>
<div id="signupError" class="error-message"></div>
<button onclick="signupUser()">Sign Up</button>
<p>Already have an account? <a onclick="showSection('login')">Login</a></p>
</div>
</section>
<!-- Login Section -->
<section id="login" class="hidden">
<div class="hero">
<img src="images/Login.jpg" alt="Login">
</div>
<div id="loginSection">
<h2>Login</h2>
<input type="text" id="loginUsername" placeholder="Username" autocomplete="off"><br>
<input type="password" id="loginPassword" placeholder="Password" autocomplete="current-password"><br>
<div id="loginError" class="error-message"></div>
<button onclick="loginUser()">Login</button>
<p>Don't have an account? <a onclick="showSection('signup')">Sign Up</a></p>
</div>
</section>
<!-- Admin Section -->
<section id="admin" class="hidden">
<h2>Admin Panel</h2>
<div id="adminLoginForm">
<input type="text" id="adminUsername" placeholder="Admin Username"><br>
<input type="password" id="adminPassword" placeholder="Admin Password"><br>
<button onclick="loginAdmin()">Login as Admin</button>
</div>
<div id="adminActions" class="hidden">
<h3>Add New Product</h3>
<input type="text" id="adminProdName" placeholder="Product Name"><br>
<input type="text" id="adminProdCategory" placeholder="Category (skincare/makeup/etc)"><br>
<input type="text" id="adminProdBrand" placeholder="Brand (eveline/neva/gabrini/keune)"><br>
<input type="number" id="adminProdPrice" placeholder="Price (PKR)"><br>
<input type="file" id="adminProdImgFile" accept="image/*"><br>
<button onclick="addProduct()">Add Product</button>
</div>
</section>
<!-- Shop Section -->
<section id="shop" class="hidden">
<div class="hero">
<img src="images/Shopping.jpg" alt="Shop Banner">
</div>
<input type="text" id="searchBoxShop" placeholder="Search Products..." onkeyup="searchProducts()">
<div class="products" id="productContainer"></div>
<select id="categoryFilterShop" onchange="filterCategory(this.value)" style="margin:15px auto; display:block;">
<option value="all">All Categories</option>
<option value="skincare">Skincare</option>
<option value="makeup">Makeup</option>
<option value="haircare">Hair Care</option>
<option value="fragrances">Fragrances</option>
<option value="tools">Tools & Accessories</option>
</select>
</section>
<!-- Cart Section -->
<section id="cart" class="hidden">
<div class="hero">
<img src="images/Cart.jpg" alt="Cart">
</div>
<div id="cartSection">
<h2>Your Cart</h2>
<div id="cartItems"></div>
<div class="cart-total" id="cartTotal"></div>
<button onclick="checkout()">Checkout (COD)</button>
<button onclick="clearCart()">Clear Cart</button>
</div>
</section>
<footer>
<p>© 2026 Sapphire Beauty</p>
</footer>
<script>
// ==================== DATA & STATE ====================
const ADMIN_CREDENTIALS = { username: "admin", password: "admin123" };
let currentUser = null;
let products = [];

// ==================== USER MANAGEMENT ====================
function getUsers() {
    const usersData = localStorage.getItem('sapphire_users');
    return usersData ? JSON.parse(usersData) : [];
}
function saveUsers(users) {
    localStorage.setItem('sapphire_users', JSON.stringify(users));
}
function userExists(username) {
    const users = getUsers();
    return users.some(u => u.username.toLowerCase() === username.toLowerCase());
}
function getUser(username) {
    const users = getUsers();
    return users.find(u => u.username.toLowerCase() === username.toLowerCase());
}

// ==================== AUTH FUNCTIONS ====================
function signupUser() {
    const username = document.getElementById('signupUsername').value.trim();
    const password = document.getElementById('signupPassword').value.trim();
    const errorEl = document.getElementById('signupError');
    errorEl.textContent = '';
    if (!username || !password) {
        errorEl.textContent = 'Please fill in all fields';
        return;
    }
    if (username.length < 3) {
        errorEl.textContent = 'Username must be at least 3 characters';
        return;
    }
    if (password.length < 5) {
        errorEl.textContent = 'Password must be at least 5 characters';
        return;
    }
    if (userExists(username)) {
        errorEl.textContent = 'Username already taken';
        return;
    }
    const users = getUsers();
    users.push({ username, password });
    saveUsers(users);
    alert('Account created successfully! You can now login.');
    showSection('login');
    document.getElementById('signupUsername').value = '';
    document.getElementById('signupPassword').value = '';
}

function loginUser() {
    const username = document.getElementById('loginUsername').value.trim();
    const password = document.getElementById('loginPassword').value.trim();
    const errorEl = document.getElementById('loginError');
    errorEl.textContent = '';
    if (!username || !password) {
        errorEl.textContent = 'Please fill in all fields';
        return;
    }
    const user = getUser(username);
    if (!user) {
        errorEl.textContent = 'User not found';
        return;
    }
    if (user.password !== password) {
        errorEl.textContent = 'Incorrect password';
        return;
    }
    currentUser = user.username;
    localStorage.setItem('currentUser', currentUser);
    localStorage.setItem('isAdmin', 'false');
    alert(`Welcome back, ${currentUser}!`);
    updateHeader();
    showSection('home');
}

function loginAdmin() {
    const username = document.getElementById('adminUsername').value.trim();
    const password = document.getElementById('adminPassword').value.trim();
    if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
        currentUser = "admin";
        localStorage.setItem('currentUser', currentUser);
        localStorage.setItem('isAdmin', 'true');
        alert('Admin login successful!');
        document.getElementById('adminLoginForm').classList.add('hidden');
        document.getElementById('adminActions').classList.remove('hidden');
        updateHeader();               // ensure header reflects admin status
        showSection('admin');
    } else {
        alert('Invalid admin credentials');
    }
}

function logout() {
    currentUser = null;
    localStorage.removeItem('currentUser');
    localStorage.removeItem('isAdmin');
    updateHeader();
    showSection('home');
}

// ==================== UI & STATE ====================
function updateHeader() {
    const userInfo = document.getElementById('userInfo');
    const loginNav = document.getElementById('loginNav');
    const signupNav = document.getElementById('signupNav');
    const adminNav = document.getElementById('adminNav');
    const logoutBtn = document.getElementById('logoutBtn');

    if (currentUser) {
        userInfo.innerText = `Hello, ${currentUser}`;
        userInfo.classList.remove('hidden');
        logoutBtn.classList.remove('hidden');
        loginNav.classList.add('hidden');
        signupNav.classList.add('hidden');

        // Show Admin link only when logged in as admin
        if (currentUser === "admin") {
            adminNav.classList.remove('hidden');
        } else {
            adminNav.classList.add('hidden');
        }
    } else {
        userInfo.classList.add('hidden');
        logoutBtn.classList.add('hidden');
        loginNav.classList.remove('hidden');
        signupNav.classList.remove('hidden');
        adminNav.classList.add('hidden');
    }
}

function showSection(id) {
    document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');

    if (id === 'shop') renderProducts();
    if (id === 'cart') renderCart();

    updateHeader();
}

// ==================== SIDE PANEL ====================
function togglePanel() {
    const panel = document.getElementById('sidePanel');
    panel.style.left = (panel.style.left === '0px') ? '-250px' : '0px';
}
function toggleBrand(id) {
    const ul = document.getElementById(id);
    ul.style.display = (ul.style.display === 'block') ? 'none' : 'block';
}

// ==================== PRODUCTS ====================
function addProduct() {
    if (currentUser !== "admin") {
        alert("Only admin can add products!");
        return;
    }
    const name = document.getElementById('adminProdName').value.trim();
    const category = document.getElementById('adminProdCategory').value.trim().toLowerCase();
    const brand = document.getElementById('adminProdBrand').value.trim().toLowerCase();
    const price = parseInt(document.getElementById('adminProdPrice').value);
    const imgFile = document.getElementById('adminProdImgFile').files[0];
    if (!name || !category || !brand || !price || isNaN(price) || !imgFile) {
        alert("Please fill all fields correctly");
        return;
    }
    const reader = new FileReader();
    reader.onload = function(e) {
        products.push({
            name,
            category,
            brand,
            price,
            img: e.target.result
        });
        renderProducts();
        // Add to side menu
        const ul = document.getElementById(brand);
        if (ul && !ul.querySelector(`li[data-name="${name}"]`)) {
            const li = document.createElement('li');
            li.textContent = name;
            li.dataset.name = name;
            li.onclick = () => filterBrandProduct(name);
            ul.appendChild(li);
        }
        alert("Product added successfully!");
        // Clear form
        document.getElementById('adminProdName').value = '';
        document.getElementById('adminProdCategory').value = '';
        document.getElementById('adminProdBrand').value = '';
        document.getElementById('adminProdPrice').value = '';
        document.getElementById('adminProdImgFile').value = '';
    };
    reader.readAsDataURL(imgFile);
}

function renderProducts(filter = 'all') {
    const container = document.getElementById('productContainer');
    container.innerHTML = '';
    products.forEach(p => {
        if (filter !== 'all' && p.category !== filter) return;
        const div = document.createElement('div');
        div.className = 'product';
        div.dataset.category = p.category;
        div.innerHTML = `
            <img src="${p.img}" alt="${p.name}">
            <h3>${p.name}</h3>
            <p>Price: PKR ${p.price}</p>
            <div class="product-overlay">
                <button onclick="addToCart('${p.name.replace(/'/g,"\\'")}',${p.price})">Add to Cart</button>
            </div>
        `;
        container.appendChild(div);
    });
}

function filterBrandProduct(name) {
    showSection('shop');
    const container = document.getElementById('productContainer');
    Array.from(container.children).forEach(prod => {
        const prodName = prod.querySelector('h3').textContent;
        prod.style.display = (prodName === name) ? 'block' : 'none';
    });
}

// ==================== CART ====================
function getCart() {
    if (!currentUser) return [];
    const cart = localStorage.getItem('cart_' + currentUser);
    return cart ? JSON.parse(cart) : [];
}
function saveCart(cart) {
    if (!currentUser) return;
    localStorage.setItem('cart_' + currentUser, JSON.stringify(cart));
}
function addToCart(name, price) {
    if (!currentUser) {
        alert("Please login first!");
        showSection('login');
        return;
    }
    let cart = getCart();
    let item = cart.find(i => i.name === name);
    if (item) {
        item.qty++;
    } else {
        cart.push({ name, price, qty: 1 });
    }
    saveCart(cart);
    renderCart();
    alert(`${name} added to cart!`);
}
function renderCart() {
    const container = document.getElementById('cartItems');
    const totalEl = document.getElementById('cartTotal');
    const cart = getCart();
    container.innerHTML = '';
    let total = 0;
    if (cart.length === 0) {
        container.innerHTML = "<p>Your cart is empty.</p>";
        totalEl.textContent = '';
    } else {
        cart.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'cart-item';
            const itemTotal = item.price * item.qty;
            total += itemTotal;
            div.innerHTML = `
                <span>${item.name}</span>
                <input type="number" value="${item.qty}" min="1"
                       onchange="updateQty(${index}, this.value)">
                <span>PKR ${itemTotal}</span>
                <button onclick="removeFromCart(${index})">Remove</button>
            `;
            container.appendChild(div);
        });
        totalEl.textContent = `Total: PKR ${total}`;
    }
    document.getElementById('cart-count').textContent =
        cart.reduce((sum, item) => sum + item.qty, 0);
}
function updateQty(index, value) {
    let cart = getCart();
    cart[index].qty = Math.max(1, parseInt(value) || 1);
    saveCart(cart);
    renderCart();
}
function removeFromCart(index) {
    let cart = getCart();
    cart.splice(index, 1);
    saveCart(cart);
    renderCart();
}
function clearCart() {
    if (confirm("Are you sure you want to clear the cart?")) {
        saveCart([]);
        renderCart();
    }
}
function checkout() {
    if (getCart().length === 0) {
        alert("Your cart is empty!");
        return;
    }
    alert("Thank you! Your order has been placed (Cash on Delivery)");
    saveCart([]);
    renderCart();
}

// ==================== UTILITIES ====================
function filterCategory(category) {
    renderProducts(category);
}
function searchProducts() {
    const query = document.getElementById('searchBoxShop').value.toLowerCase().trim();
    const container = document.getElementById('productContainer');
    Array.from(container.children).forEach(prod => {
        const name = prod.querySelector('h3').textContent.toLowerCase();
        prod.style.display = name.includes(query) ? 'block' : 'none';
    });
}

// Slideshow
const slides = [
    'images/Eveline.jpg',
    'images/Neva.jpg',
    'images/Gabrini.jpg',
    'images/Keune.jpg'
];
let slideIndex = 0;
function showSlide() {
    document.getElementById('slideShow').src = slides[slideIndex];
    slideIndex = (slideIndex + 1) % slides.length;
}
setInterval(showSlide, 4000);

// ==================== INIT ====================
function init() {
    currentUser = localStorage.getItem('currentUser') || null;
    updateHeader();            // will show Admin link if currentUser === "admin"
    showSection('home');
    renderCart();
}
window.onload = init;
</script>
</body>
</html>
